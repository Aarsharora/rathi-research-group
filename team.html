<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rathi Lab || Abouts</title>
    <link rel="Icon" type="image/x-icon" href="assets/img/favicon.ico">
    <link rel="stylesheet" href="assets/css/team.css">
    <link rel="stylesheet" href="assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css" />
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="assets/css/animations.css">


</head>

<body>
    <!-- Navigation -->
    <div class="navigation">
        <nav class="navbar navbar-expand-lg">
            <div class="container">
                <a class="navbar-brand" href="index.html"><img
                        src="assets/img/Screenshot_2025-11-12_131002-removebg-preview.png" class="img-fluid"
                        style="width: 90px;" alt="">R.R.G </a>

                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
                    <ul class="navbar-nav">
                        <li class="nav-item">
                            <a class="nav-link" href="About.html">About</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="research.html">Research</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="news.html">News</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="collabration.html">Collaboration</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="publication.html">Publication</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="team.html">Team</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="lab_facility.html">Lab Facility</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="gallry.html">Gallery</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="contact.html">Contact</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    </div>
    <div class="breadcrumb-section">
        <div class="breadcrumb-container">
            <nav class="breadcrumb-nav" aria-label="Breadcrumb">
                <a href="index.html" class="breadcrumb-item">
                    <svg class="home-icon" fill="currentColor" viewBox="0 0 20 20">
                        <path
                            d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z" />
                    </svg>
                    Home
                </a>

                <span class="breadcrumb-separator">›</span>

                <a href="team.html" class="breadcrumb-item">
                    Team
                </a>
            </nav>

            <h1 class="page-title text-center">Group Members</h1>
            <p class="page-description text-center">In the Johnson Lab, we recognize that diversity of thought,
                background and
                experience drive innovation and learning. Thus, we strive to foster an environment
                that supports the training, education and success of all scientists in our group.</p>
        </div>
    </div>

    <div class="jl-group-section">
        <div class="jl-decorative-circle"></div>

        <!-- Principal Investigator -->
        <h2 class="jl-role-title">Principal Investigator</h2>
        <div class="jl-member-container" id="category-principal-investigator"></div>

        <h2 class="jl-role-title">Senior Scientist</h2>
        <div class="jl-member-container" id="category-senior-scientist"></div>

        <h2 class="jl-role-title">Postdoctoral Researchers</h2>
        <div class="jl-member-container" id="category-postdoctoral-researchers"></div>

        <h2 class="jl-role-title">Doctoral Researcher</h2>
        <div class="jl-member-container" id="category-doctoral-researcher"></div>

        <h2 class="jl-role-title">Undergraduate Students</h2>
        <div class="jl-member-container" id="category-undergraduate-students"></div>

        <h2 class="jl-role-title">Support Staff</h2>
        <div class="jl-members-grid" id="category-support-staff"></div>
    </div>
    <div class="afb-section">
        <h1 class="afb-title">Away From The Bench</h1>

        <div class="afb-gallery-grid">
            <div class="afb-gallery-item" onclick="openLightbox(0)">
                <img src="https://images.unsplash.com/photo-1511632765486-a01980e01a18?w=600&h=600&fit=crop"
                    alt="Lab event 1" class="afb-gallery-img">
            </div>
            <div class="afb-gallery-item" onclick="openLightbox(1)">
                <img src="https://images.unsplash.com/photo-1543269865-cbf427effbad?w=600&h=600&fit=crop"
                    alt="Lab event 2" class="afb-gallery-img">
            </div>
            <div class="afb-gallery-item" onclick="openLightbox(2)">
                <img src="https://images.unsplash.com/photo-1528605105345-5344ea20e269?w=600&h=600&fit=crop"
                    alt="Lab event 3" class="afb-gallery-img">
            </div>
            <div class="afb-gallery-item" onclick="openLightbox(3)">
                <img src="https://images.unsplash.com/photo-1492684223066-81342ee5ff30?w=600&h=600&fit=crop"
                    alt="Lab event 4" class="afb-gallery-img">
            </div>
            <div class="afb-gallery-item" onclick="openLightbox(4)">
                <img src="https://images.unsplash.com/photo-1543269664-56d93c1b41a6?w=600&h=600&fit=crop"
                    alt="Lab event 5" class="afb-gallery-img">
            </div>
            <div class="afb-gallery-item" onclick="openLightbox(5)">
                <img src="https://images.unsplash.com/photo-1529156069898-49953e39b3ac?w=600&h=600&fit=crop"
                    alt="Lab event 6" class="afb-gallery-img">
            </div>
            <div class="afb-gallery-item" onclick="openLightbox(6)">
                <img src="https://images.unsplash.com/photo-1511578314322-379afb476865?w=600&h=600&fit=crop"
                    alt="Lab event 7" class="afb-gallery-img">
            </div>
            <div class="afb-gallery-item" onclick="openLightbox(7)">
                <img src="https://images.unsplash.com/photo-1505373877841-8d25f7d46678?w=600&h=600&fit=crop"
                    alt="Lab event 8" class="afb-gallery-img">
            </div>
        </div>
    </div>

    <!-- Lightbox Modal -->
    <div class="afb-lightbox" id="lightbox" onclick="closeLightboxOnBackground(event)">
        <span class="afb-close-btn" onclick="closeLightbox()">&times;</span>
        <span class="afb-prev-btn" onclick="changeImage(-1); event.stopPropagation()">&#10094;</span>
        <div class="afb-lightbox-content">
            <img src="" alt="Gallery image" class="afb-lightbox-img" id="lightboxImg">
        </div>
        <span class="afb-next-btn" onclick="changeImage(1); event.stopPropagation()">&#10095;</span>
        <div class="afb-counter" id="counter"></div>
    </div>

    <div class="scroll-top" onclick="window.scrollTo({top: 0, behavior: 'smooth'})">
        <i class="fas fa-chevron-up"></i>
    </div>

    <footer class="footer-section">
        <div class="footer-content">
            <!-- Logo -->
            <div class="logo-container">
                <img class="logo-icon" src="assets/img/second logo 1.png">

                </img>
                <div class="logo-text">Rathi Research Group</div>
            </div>

            <!-- Navigation Menu -->
            <ul class="nav-menu">
                <li><a href="index.html">Home</a></li>
                <li><a href="research.html">Research</a></li>
                <li><a href="publication.html">Publications</a></li>
                <li><a href="team.html">Team</a></li>
                <li><a href="gallry.html">Gallery</a></li>
                <li><a href="contact.html">Contact</a></li>
            </ul>

            <!-- Email Icon -->
            <div class="email-icon">
                <a href="mailto:rathi@mit.edu" title="Email Us">
                    <i class="fas fa-envelope"></i>
                </a>
            </div>

            <!-- Bottom Section -->
            <div class="footer-bottom">
                <!-- MIT Logo -->
                <!-- Copyright -->
                <div class="copyright">
                    © 2025 <strong>Rathi Research Group</strong>. All rights reserved.
                    Proudly created by <strong><a href="https://arsharora.netlify.app/"
                            style="text-decoration: none; color: inherit;">Arsh Arora</strong></a>.
                </div>
            </div>
        </div>
    </footer>


    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script>
        const images = [
            'https://images.unsplash.com/photo-1511632765486-a01980e01a18?w=1200&h=1200&fit=crop',
            'https://images.unsplash.com/photo-1543269865-cbf427effbad?w=1200&h=1200&fit=crop',
            'https://images.unsplash.com/photo-1528605105345-5344ea20e269?w=1200&h=1200&fit=crop',
            'https://images.unsplash.com/photo-1492684223066-81342ee5ff30?w=1200&h=1200&fit=crop',
            'https://images.unsplash.com/photo-1543269664-56d93c1b41a6?w=1200&h=1200&fit=crop',
            'https://images.unsplash.com/photo-1529156069898-49953e39b3ac?w=1200&h=1200&fit=crop',
            'https://images.unsplash.com/photo-1511578314322-379afb476865?w=1200&h=1200&fit=crop',
            'https://images.unsplash.com/photo-1505373877841-8d25f7d46678?w=1200&h=1200&fit=crop'
        ];

        let currentIndex = 0;

        function openLightbox(index) {
            currentIndex = index;
            updateLightbox();
            document.getElementById('lightbox').classList.add('afb-active');
            document.body.style.overflow = 'hidden';
        }

        function closeLightbox() {
            document.getElementById('lightbox').classList.remove('afb-active');
            document.body.style.overflow = 'auto';
        }

        function closeLightboxOnBackground(event) {
            if (event.target.id === 'lightbox') {
                closeLightbox();
            }
        }

        function changeImage(direction) {
            currentIndex += direction;

            if (currentIndex < 0) {
                currentIndex = images.length - 1;
            } else if (currentIndex >= images.length) {
                currentIndex = 0;
            }

            updateLightbox();
        }

        function updateLightbox() {
            document.getElementById('lightboxImg').src = images[currentIndex];
            document.getElementById('counter').textContent = `${currentIndex + 1} / ${images.length}`;
        }

        // Keyboard navigation
        document.addEventListener('keydown', function (e) {
            const lightbox = document.getElementById('lightbox');
            if (lightbox.classList.contains('afb-active')) {
                if (e.key === 'ArrowLeft') {
                    changeImage(-1);
                } else if (e.key === 'ArrowRight') {
                    changeImage(1);
                } else if (e.key === 'Escape') {
                    closeLightbox();
                }
            }
        });

    </script>
    <script src="assets/js/Main.js"></script>
    <script>
        // ============ Team API Rendering (same pattern as news) ============
        document.addEventListener('DOMContentLoaded', () => {
            const ENDPOINTS = ["https://lab-backend-awux.onrender.com/team", "https://lab-backend-awux.onrender.com/api/team"];

            const CATEGORY_IDS = {
                'Principal Investigator': 'category-principal-investigator',
                'Senior Scientist': 'category-senior-scientist',
                'Postdoctoral Researchers': 'category-postdoctoral-researchers',
                'Doctoral Researcher': 'category-doctoral-researcher',
                'Undergraduate Students': 'category-undergraduate-students',
                'Support Staff': 'category-support-staff'
            };

            const containers = Object.fromEntries(
                Object.values(CATEGORY_IDS).map(id => [id, document.getElementById(id)])
            );

            const FALLBACK_TEAM_DATA = [
                {
                    name: 'Dr. Sarah Rathi',
                    category: 'Principal Investigator',
                    imageUrl: 'assets/img/rathi%20sir.jpg',
                    email: 'rathi@mit.edu',
                    bio: 'Dr. Rathi leads the research group with a focus on protein folding and quality control mechanisms. She received her PhD from Stanford University.'
                },
                {
                    name: 'Michael Chen',
                    category: 'Senior Scientist',
                    imageUrl: 'assets/img/man.jpg',
                    email: 'chen@mit.edu',
                    bio: 'Michael specializes in structural biology and cryo-EM. He manages the day-to-day operations of the lab.'
                },
                {
                    name: 'Priya Patel',
                    category: 'Postdoctoral Researchers',
                    imageUrl: 'assets/img/women.jpg',
                    email: 'ppatel@mit.edu',
                    bio: 'Priya investigates the role of chaperones in neurodegenerative diseases.'
                },
                {
                    name: 'David Kim',
                    category: 'Doctoral Researcher',
                    imageUrl: 'assets/img/img1.jpg',
                    email: 'dkim@mit.edu',
                    bio: 'David is studying the aggregation kinetics of amyloid proteins.'
                },
                {
                    name: 'Emily Johnson',
                    category: 'Undergraduate Students',
                    imageUrl: 'assets/img/img2.jpg',
                    email: 'ejohnson@mit.edu',
                    bio: 'Emily is an undergraduate researcher assisting with protein purification.'
                },
                {
                    name: 'James Wilson',
                    category: 'Support Staff',
                    imageUrl: 'assets/img/img3.jpg',
                    email: 'jwilson@mit.edu',
                    bio: 'James manages lab inventory and equipment maintenance.'
                }
            ];

            function buildImageUrl(imagePath) {
                // Gray placeholder SVG data URI
                const PLACEHOLDER_IMAGE = 'data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'400\' height=\'400\' viewBox=\'0 0 400 400\'%3E%3Crect width=\'400\' height=\'400\' fill=\'%23e2e8f0\'/%3E%3Ctext x=\'50%25\' y=\'50%25\' font-family=\'Arial, sans-serif\' font-size=\'24\' fill=\'%2364748b\' dy=\'.3em\' text-anchor=\'middle\'%3ENo Image%3C/text%3E%3C/svg%3E';

                if (!imagePath) return PLACEHOLDER_IMAGE;
                let trimmed = String(imagePath).trim();

                // If it's already a full URL (http/https) or data URI, return as is
                if (/^(https?:)?\/\//i.test(trimmed) || trimmed.startsWith('data:')) {
                    return trimmed;
                }

                // If it's a local asset path (starts with assets/), return as is relative
                // Also handle cases where spaces might not be encoded if passed dynamically
                if (trimmed.startsWith('assets/')) {
                    return trimmed;
                }

                // Otherwise, assume it's a relative path from the backend
                // Replace localhost with remote URL if present
                if (trimmed.includes('localhost:3000')) {
                    trimmed = trimmed.replace(/http:\/\/localhost:3000\/?/g, 'https://lab-backend-awux.onrender.com/');
                }

                const normalized = trimmed.replace(/\\/g, '/').replace(/^\/+/, '');
                return `https://lab-backend-awux.onrender.com/${normalized}`;
            }

            function toggleBio(id) {
                const bio = document.getElementById(id);
                if (!bio) return;

                const isHidden = bio.getAttribute('data-open') !== 'true';
                if (isHidden) {
                    bio.style.display = 'block';
                    bio.style.maxHeight = bio.scrollHeight + 'px';
                    bio.setAttribute('data-open', 'true');
                } else {
                    bio.style.maxHeight = '0';
                    bio.style.display = 'none';
                    bio.setAttribute('data-open', 'false');
                }
            }
            window.toggleBio = toggleBio;

            function createCard(member, bioId) {
                const PLACEHOLDER_IMAGE = 'data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'400\' height=\'400\' viewBox=\'0 0 400 400\'%3E%3Crect width=\'400\' height=\'400\' fill=\'%23e2e8f0\'/%3E%3Ctext x=\'50%25\' y=\'50%25\' font-family=\'Arial, sans-serif\' font-size=\'24\' fill=\'%2364748b\' dy=\'.3em\' text-anchor=\'middle\'%3ENo Image%3C/text%3E%3C/svg%3E';

                const emailLink = member.email
                    ? `<a href="mailto:${member.email}" class="jl-email-icon"><i class="fa-solid fa-envelope"></i></a>`
                    : '';
                const linkedinLink = member.linkedin
                    ? `<a href="${member.linkedin}" target="_blank" rel="noopener" class="jl-email-icon"><i class="fa-brands fa-linkedin"></i></a>`
                    : '';

                return `
                <div class="jl-member-card">
                    <div class="jl-image-wrapper">
                        <img src="${buildImageUrl(member.imageUrl)}" alt="${member.name}" class="jl-member-photo"
                             onerror="this.src='${PLACEHOLDER_IMAGE}'">
                    </div>
                    <div class="jl-member-info">
                        <h3 class="jl-member-name">${member.name}</h3>
                        <button class="jl-read-bio-btn" onclick="toggleBio('${bioId}')">Read Bio</button>
                        ${emailLink}
                        ${linkedinLink}
                    </div>
                    <div class="jl-bio-details" id="${bioId}" style="display:none;">
                        <p class="jl-bio-text">${member.bio || 'No bio available.'}</p>
                    </div>
                </div>`;
            }

            function showMessage(container, html) {
                if (container) container.innerHTML = html;
            }

            function extractMembers(data) {
                if (Array.isArray(data)) return data;
                if (data && Array.isArray(data.data)) return data.data;
                if (data && Array.isArray(data.team)) return data.team;
                if (data && Array.isArray(data.items)) return data.items;
                if (data && Array.isArray(data.results)) return data.results;
                return [];
            }

            async function loadTeam() {
                // Loading state
                Object.values(containers).forEach(c =>
                    showMessage(c, '<p class="text-muted">Loading members...</p>')
                );

                // DEMO MODE: Skipping API fetch and using local data directly
                console.log("Using demo team data");
                const members = FALLBACK_TEAM_DATA;

                // clear
                Object.values(containers).forEach(c => {
                    if (c) c.innerHTML = '';
                });

                if (!members || members.length === 0) {
                    Object.values(containers).forEach(c =>
                        showMessage(c, '<p class="text-muted">No members found in this category.</p>')
                    );
                    return;
                }

                const counts = {};
                members.forEach((member, idx) => {
                    const containerId = CATEGORY_IDS[member.category];
                    // Fallback mechanism if category doesn't match exactly
                    let finalContainerId = containerId;
                    if (!finalContainerId) {
                        // Try to find a default or map loosely
                        if (member.category.includes('Principal')) finalContainerId = CATEGORY_IDS['Principal Investigator'];
                        else if (member.category.includes('Senior')) finalContainerId = CATEGORY_IDS['Senior Scientist'];
                        else if (member.category.includes('Postdoc')) finalContainerId = CATEGORY_IDS['Postdoctoral Researchers'];
                        else if (member.category.includes('Doctoral') || member.category.includes('PhD')) finalContainerId = CATEGORY_IDS['Doctoral Researcher'];
                        else if (member.category.includes('Undergrad')) finalContainerId = CATEGORY_IDS['Undergraduate Students'];
                        else finalContainerId = CATEGORY_IDS['Support Staff'];
                    }

                    const container = containers[finalContainerId];
                    if (!container) return;

                    const bioId = `bio-${idx}`;
                    container.insertAdjacentHTML('beforeend', createCard(member, bioId));
                    counts[finalContainerId] = (counts[finalContainerId] || 0) + 1;
                });

                Object.entries(containers).forEach(([id, el]) => {
                    if (!counts[id]) {
                        showMessage(el, '<p class="text-muted">No members found in this category.</p>');
                    }
                });
            }

            loadTeam();
        });

        // ============================================
        // Sticky Navigation on Scroll
        // ============================================
        window.addEventListener('scroll', function () {
            const navigation = document.querySelector('.navigation');

            if (window.scrollY > 200) {
                navigation.classList.add('sticky');
                document.body.style.paddingTop = navigation.offsetHeight + 'px';
            } else {
                navigation.classList.remove('sticky');
                document.body.style.paddingTop = '0';
            }
        });

        // ============================================
        // Active Page Highlight
        // ============================================
        document.addEventListener('DOMContentLoaded', function () {
            const currentPage = window.location.pathname.split('/').pop();
            const navLinks = document.querySelectorAll('.nav-link');

            navLinks.forEach(link => {
                if (link.getAttribute('href') === currentPage) {
                    link.classList.add('active');
                }
            });
        });

        // ============================================
        // Close Mobile Menu on Link Click
        // ============================================
        document.addEventListener('DOMContentLoaded', function () {
            const navLinks = document.querySelectorAll('.nav-link');
            const navbarCollapse = document.querySelector('.navbar-collapse');

            navLinks.forEach(link => {
                link.addEventListener('click', function () {
                    if (navbarCollapse.classList.contains('show')) {
                        const bsCollapse = new bootstrap.Collapse(navbarCollapse, {
                            toggle: false
                        });
                        bsCollapse.hide();
                    }
                });
            });
        });

    </script>
    <script src="assets/js/animations.js"></script>
</body>

</html>